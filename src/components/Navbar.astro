---
import { Image } from "astro:assets";
import logo from '../images/logo-dark.png';
---
<style>
  .nav-hidden {
    transform: translateY(-70px);
    transition: transform 0.8s ease-in-out; 
  }
  .container {
    width: 95vw;
  }

  h3 {
    position: relative;
    text-decoration: none;
  }

  h3::before {
    content: '';
    position: absolute;
    width: 100%;
    height: 1px;
    border-radius: 2px;
    background-color: #18272F;
    top: 1.5rem;
    left: 0;
    transform-origin: right;
    transform: scaleX(0);
    transition: transform .3s ease-in-out;
  }

  h3:hover::before {
    transform-origin: left;
    transform: scaleX(1);
  }
</style>

<header id="header" class='navbar z-50 bg-customPrimary'>
  <div class="mt-0 xl:flex xl:items-center xl:justify-between container-m m-auto px-2 xl:border-b xl:border-black">
    <div class='flex items-center justify-between py-3 xl:w-auto z-50 xl:mr-0 xl:ml-0 relative border-b border-black xl:border-none'>
      <a href="/" class='logo w-9 xl:w-12 hover:scale-105 transition-all duration-500' aria-label="Link to homepage">
        <Image src={logo} alt=""/>
      </a>
      <button class='menu-button xl:hidden border border-[#151E1E] text-[#151e1e] py-[.3rem] px-[1rem] rounded-full text-sm' aria-label="Menu button">Menu</button>
    </div>
    <div class='absolute xl:relative bg-[#B4B2B2] xl:bg-inherit w-full top-0 right-0 xl:w-full xl:px:0 xl:pl-20 xl:pr-0 xl:flex xl:top-auto xl:right-auto z-40'>
      <nav class='hidden border-2 border-black px-4 xl:p-0 xl:border-none text-black w-full pt-[4.5rem] xl:flex xl:h-min h-screen xl:pt-0 xl:mt-0 xl:items-center xl:justify-end'>
        <ul class='border-b xl:border-none border-black border-opacity-20 flex flex-col xl:flex-row xl:items-center xl:w-[50%]'>
          <div class='nav-links border-b xl:border-none border-black border-opacity-20 text-black xl:text-[#151E1E] xl:flex xl:w-full xl:justify-between'>
            <li class="menu-item">
              <a href='/services' class="py-4 border-b xl:border-none border-black border-opacity-20 font-normal w-full flex justify-between xl:justify-normal text-base items-center xl:font-medium" aria-label="Link to services page">
                <h3>SERVICES</h3>
                <img class='w-3 xl:hidden xl:ml-2 xl:pt-1' src="/images/arrow-right-solid.svg" alt="Toggle" />
              </a>
            </li>
            <li class="menu-item">
              <a href='/projects' class="border-b border-t xl:border-none border-black border-opacity-20 py-4 font-normal w-full flex justify-between xl:justify-normal text-base items-center xl:font-medium" aria-label="Link to project page">
                <h3>PROJECTS</h3>
                <img class='w-3 xl:hidden xl:ml-2 xl:pt-1' src="/images/arrow-right-solid.svg" alt="Toggle" />
              </a>
            </li>
            <li class="menu-item">
              <a href='/articles' class="py-4 border-b border-t xl:border-none border-black border-opacity-20 font-normal w-full flex justify-between xl:justify-normal text-base items-center xl:font-medium"  aria-label="Link to blog page">
                <h3>EDITORIAL</h3>
                <img class='w-3 xl:hidden xl:ml-2 xl:pt-1' src="/images/arrow-right-solid.svg" alt="Toggle" />
              </a>
            </li>
            <li class="menu-item">
              <a href='/about' class="py-4 border-b border-t xl:border-none border-black border-opacity-20 font-normal w-full flex justify-between xl:justify-normal text-base items-center xl:font-medium"  aria-label="Link to about page">
                <h3>ABOUT</h3>
                <img class='w-3 xl:hidden xl:ml-2 xl:pt-1' src="/images/arrow-right-solid.svg" alt="Toggle" />
              </a>
            </li>
            <li class="menu-item">
              <a href='/contact' class="py-4 border-b border-t xl:border-none border-black border-opacity-20 font-normal w-full flex justify-between xl:justify-normal text-base items-center xl:font-medium" aria-label="Link to contact page">
                <h3>CONTACT</h3>
                <img class='w-3 xl:hidden xl:ml-2 xl:pt-1' src="/images/arrow-right-solid.svg" alt="Toggle" />
              </a>
            </li>
            <li class="menu-item xl:hidden">
              <a href='https://www.instagram.com/audiolabs.au/' target="_blank" class="py-4 border-t xl:border-none border-black border-opacity-20 font-normal w-full flex justify-between xl:justify-normal text-base items-center xl:font-medium" aria-label="Link to Instagram">
                <h3>INSTAGRAM</h3>
                <img class='w-3 xl:hidden xl:ml-2 xl:pt-1' src="/images/up-right-from-square-solid.svg" alt="Toggle" />
              </a>
            </li>
          </div>
        </ul>
      </nav>
    </div>
  </div>
</header>

<script>
// Navbar Toggle
const navBtn = document.querySelector('.menu-button');
const navBar = document.querySelector('nav');
const logoImg = document.querySelector('.logo img');
let menuOpen = false;

navBtn?.addEventListener('click', () => {
  menuOpen = !menuOpen; // Toggle the state
  navBar?.classList.toggle('hidden', !menuOpen);
  navBtn?.classList.toggle('text-[#151e1e]', !menuOpen);
  navBtn.textContent = menuOpen ? 'Close' : 'Menu'; // Toggle the button text
  navBar?.classList.toggle('border-b', !menuOpen);

  // Toggle no-scroll class on body
  document.body.classList.toggle('no-scroll', menuOpen);

});

